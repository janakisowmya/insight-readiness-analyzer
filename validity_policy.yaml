dataset:
  name: chaotic_ultra_low

reproducibility:
  policy_hash: validity_test

roles:
  critical_columns:
    - _row_id
    - customer_id
  protected_columns:
    - _row_id

validity_rules:
  enabled: true
  on_violation: "null"
  non_negative_columns:
    - discount_pct
  ranges:
    account_balance:
      min: -1000.0
      max: 100000.0
  allowed_values:
    segment: ["smb", "enterprise"]
  regex:
    email: "^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\\.[a-zA-Z0-9-.]+$"

# -------------------------
# STANDARDIZATION
# -------------------------
standardization:
  global_trim_whitespace: true
  casefold: "lower"
  mappings:
    is_active:
      "yes": "true"
      "y": "true"
      "1": "true"
      "true": "true"
      "no": "false"
      "n": "false"
      "0": "false"
      "false": "false"
    segment:
      "smb": "smb"
      "sm b": "smb"
      "enterprise": "enterprise"
      "unknown": "unknown"

# -------------------------
# PARSING
# -------------------------
parsing:
  column_types:
    amount: numeric
    account_balance: numeric
    discount_pct: numeric
    signup_date: date
    last_login: datetime
    is_active: boolean

  boolean:
    true_values: ["true", "yes", "y", "1"]
    false_values: ["false", "no", "n", "0"]
    on_failure: "null"

  numeric:
    allow_commas: true
    allow_currency_symbols: true
    allow_percent_symbol: true
    percent_scale: auto
    on_failure: "null"

  datetime:
    allowed_formats:
      - "%Y-%m-%d"
      - "%Y/%m/%d"
      - "%d/%m/%Y"
      - "%Y-%m-%dT%H:%M:%SZ"
      - "%Y-%m-%d %H:%M:%S"
    dayfirst: false
    yearfirst: true
    on_failure: "null"

# -------------------------
# MISSING DATA
# -------------------------
missing_data:
  enabled: true
  drop_if_missing_critical: true
  imputation:
    numeric:
      default: mean
    datetime:
      default: none
    categorical:
      default: mode
