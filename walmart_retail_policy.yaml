dataset:
  name: walmart_retail_sales

reproducibility:
  policy_hash: "walmart_retail_v1"

roles:
  critical_columns:
    - _row_id
    - store_id
    - transaction_id
  protected_columns:
    - store_id
    - transaction_id
    - cashier_id
    - notes

standardization:
  strip_nonprinting: true
  global_trim_whitespace: true
  global_collapse_whitespace: true
  casefold: lower
  mappings:
    is_return:
      "true": "true"
      "false": "false"
      "yes": "true"
      "no": "false"
      "1": "true"
      "0": "false"

    payment_method:
      "credit": "credit"
      "debit": "debit"
      "cash": "cash"
      "ebt": "ebt"
      "insurance": "other"
      "void": "void"

parsing:
  column_types:
    _row_id: integer
    quantity: numeric
    unit_price: numeric
    total_amount: numeric
    discount_applied: numeric
    tax_amount: numeric
    transaction_date: datetime
    is_return: boolean

  boolean:
    true_values: ["true", "yes", "1"]
    false_values: ["false", "no", "0"]
    on_failure: "null"

  numeric:
    allow_commas: true
    allow_currency_symbols: true
    allow_percent_symbol: false
    on_failure: "null"

  datetime:
    dayfirst: false
    yearfirst: false
    allowed_formats:
      - "%Y-%m-%d %H:%M:%S"
      - "%Y-%m-%d"
      - "%m/%d/%Y %H:%M:%S"
      - "%m/%d/%Y"
    on_failure: "null"

missing_data:
  enabled: true
  drop_if_missing_critical: true
  imputation:
    numeric:
      default: median
      allow_if_missing_pct_leq: 0.30
      constants: {}
    datetime:
      default: constant
      allow_if_missing_pct_leq: 0.20
      constants:
        transaction_date: "2026-01-15T00:00:00Z"
    categorical:
      default: mode
      allow_if_missing_pct_leq: 0.40
      constants:
        payment_method: "unknown"
